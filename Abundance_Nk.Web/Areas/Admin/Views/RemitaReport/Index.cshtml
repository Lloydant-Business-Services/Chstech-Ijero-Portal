@model Abundance_Nk.Web.Areas.Admin.ViewModels.RemitaPaymentViewModel
@{
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

@{
    ViewBag.Title = "Index";
}


<script src="~/Scripts/jquery-1.11.1.min.js"></script>
<script src="~/Scripts/jquery-1.11.1.min.js"></script>
<script src="~/Scripts/jquery-2.1.3.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#submit').on('click', function (event) {
            //event.preventDefault();
            $('#busy').show();
            //$(this).trigger(event);
        })

    })
</script>
<h2>Remita Transactions</h2>
<div>

    <div class="col-md-12">
        @if (TempData["Message"] != null)
        {
            @Html.Partial("_Message", (Abundance_Nk.Model.Model.Message)TempData["Message"])
        }
        @using (Html.BeginForm("Index", "RemitaReport", new { area = "Admin" }, FormMethod.Post))
        {
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.DateFrom, "From:", new { @class = "control-label col-md-2" })
                        @Html.TextBoxFor(model => model.DateFrom, new { @class = "form-control col-md-6 date", @type = "date" })
                        @Html.ValidationMessageFor(model => model.DateFrom)
                    </div>

                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.DateTo, "To:", new { @class = "control-label col-md-2" })
                        @Html.TextBoxFor(model => model.DateTo, new { @class = "form-control col-md-6 date", @type = "date" })
                        @Html.ValidationMessageFor(model => model.DateTo)
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-md-6"></div>
                <div class="col-md-6">
                    <input id="submit" type="submit" class="btn btn-success" value="Search" />
                    <img src="~/Content/Images/bx_loader.gif" width="20px" height="20px" style="display:none" id="busy" />
                </div>
            </div>
        }
    </div>


    @if (Model.remitaPaymentList != null && Model.remitaPaymentList.Count > 0)
    {
        <table class="table table-bordered table-hover table-striped">
            <thead>
                <tr>
                    <th>@Html.ActionLink("Full name", "Index", new { sortOrder = ViewBag.FullName, currentFilter = ViewBag.CurrentFilter })</th>
                    <th>@Html.ActionLink("Invoice Number", "Index", new { sortOrder = ViewBag.FullName, currentFilter = ViewBag.CurrentFilter })</th>
                    <th>@Html.ActionLink("Remita Retrieval Reference", "Index", new { sortOrder = ViewBag.FullName, currentFilter = ViewBag.CurrentFilter })</th>
                    <th>@Html.ActionLink("Transaction Amount", "Index", new { sortOrder = ViewBag.Number, currentFilter = ViewBag.CurrentFilter })</th>
                    <th>@Html.ActionLink("Transaction Date", "Index", new { sortOrder = ViewBag.Number, currentFilter = ViewBag.CurrentFilter })</th>
                    <th>@Html.ActionLink("Transaction Status", "Index", new { sortOrder = ViewBag.Number, currentFilter = ViewBag.CurrentFilter })</th>
                    <th></th>
                </tr>
            </thead>
            <tbody style="color:black;">
                @for (var itemIndex = 0; itemIndex < Model.remitaPaymentList.Count; itemIndex++)
                {
                    <tr>
                        <td>@Html.DisplayTextFor(m => m.remitaPaymentList[itemIndex].payment.Person.FullName)</td>
                        <td>@Html.DisplayTextFor(m => m.remitaPaymentList[itemIndex].payment.InvoiceNumber)</td>
                        <td>@Html.DisplayTextFor(m => m.remitaPaymentList[itemIndex].RRR)</td>
                        <td>@Html.DisplayTextFor(m => m.remitaPaymentList[itemIndex].TransactionAmount)</td>
                        <td>@Html.DisplayTextFor(m => m.remitaPaymentList[itemIndex].TransactionDate)</td>
                        <td>@Html.DisplayTextFor(m => m.remitaPaymentList[itemIndex].Status)</td>
                        <td>@Html.ActionLink("Get Status", "GetStatus", "RemitaReport", new { order_Id = Model.remitaPaymentList[itemIndex].OrderId }, new { @class = "btn btn-default" })</td>
                    </tr>
                }

            </tbody>
        </table>
    }




</div>